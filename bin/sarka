#!/bin/bash

## Adapted from https://coderwall.com/p/tixbrq/mount-remote-dir-in-the-osx-finder-using-sshfs-and-homebrew

HOST=farligm@a.tetov.se

REMOTEDIRS=( /home/farligm/ /home/farligm/bay/vind/ )

MOUNTPATH=$HOME/Desktop

MOUNTDIRS=( ahome avind )

if ! [[ ${#REMOTEPOINTS[@]} == ${#MOUNTNAMES[@]} ]] ;
then
    echo "Length of arrays differ."
    exit 1
fi

#reset mount

for i in ${MOUNTDIRS[@]} ; do
    umount -f $MOUNTPATH/$i
    mkdir -pv $MOUNTPATH/$i
done

#mount dir
for (( i = 0 ; i < ${#REMOTEDIRS[@]} ; i++ )) do
    REMOTELOC=${REMOTEDIRS[$i]}
    LOCALNAME=${MOUNTDIRS[$i]}
    sshfs $HOST:$REMOTELOC $MOUNTPATH/$LOCALNAME -oauto_cache,"ssh_command=ssh -F $HOME/.ssh/sshfsconfig",reconnect,defer_permissions,noappledouble,negative_vncache,volname=$LOCALNAME &
done
