#!/usr/bin/env bash

## Adapted from https://coderwall.com/p/tixbrq/mount-remote-dir-in-the-osx-finder-using-sshfs-and-homebrew

remote=$server_user@$server_url

remoteDirs=( $server_home $server_hdd )

mountPath=$HOME/Desktop

mountDirs=( ahome avind )

if ! [[ ${#remoteDirs[@]} == ${#mountDirs[@]} ]] ;
then
    echo "Length of arrays differ."
    exit 1
fi

#reset mount

for i in ${mountDirs[@]} ; do
    umount -f $mountPath/$i
    mkdir -pv $mountPath/$i
done

#mount dir
for (( i = 0 ; i < ${#remoteDirs[@]} ; i++ )) do
    x=${remoteDirs[$i]}
    y=${mountDirs[$i]}
    sshfs $remote:$x $mountPath/$y -oauto_cache,reconnect,defer_permissions,noappledouble,negative_vncache,volname=$y
done
