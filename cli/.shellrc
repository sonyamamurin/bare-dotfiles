# General env
export VISUAL=vim
export EDITOR="$VISUAL"

export PAGER="less"
export LESS=" -R"
if test -f "/usr/bin/src-hilite-lesspipe.sh"; then
    export LESSOPEN="| /usr/bin/src-hilite-lesspipe.sh %s"
fi

export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8

eval `dircolors $HOME/.dircolors.dark256`

export DOTFILES=$HOME/tetov-dotfiles

export XDG_RUNTIME_DIR=/run/user/$(id -u)

# virtualenvwrapper
export WORKON_HOME=$HOME/.virtualenvs
export PROJECT_HOME=$HOME/l-repos
if test -f /usr/bin/virtualenvwrapper.sh ; then
    source /usr/bin/virtualenvwrapper.sh
elif test -f /usr/share/usr/share/virtualenvwrapper/virtualenvwrapper.sh ; then
    source /usr/share/usr/share/virtualenvwrapper/virtualenvwrapper.sh
fi

# aliases
alias ll='ls -lh'
alias la='ls -A'
alias l='ls'
alias mkdir='mkdir -pv'
alias rmi='rm -i'
alias cp='cp -i'
alias mv='mv -i'
alias ..='cd ..'
alias _='sudo '
alias r='rolldice -s '

alias ls='ls -F --color=auto'
alias grep='grep -i --color=auto --exclude-dir={.bzr,CVS,.git,.hg,.svn}'

alias cpc='xclip -selection c'

# rtcontrol
alias rthot="watch -n30 'rtcontrol -rs up,down,name xfer=+0 2>&1'"
alias rtmsg="rtcontrol -s alias,message,name 'message=?*' 'message=!*Tried?all?trackers*'"
alias rtmsgstats="rtcontrol -q -s alias,message -o alias,message 'message=?*' 'message=!*Tried?all?trackers*' | uniq -c"
alias rt2days="rtcontrol --column-headers -scompleted -ocompletion completed=-2d"
alias rtstats="rtcontrol -q -o alias -s alias \\* | uniq -c"
alias rti="rtcontrol is_complete=no"
alias rttrump='rtcontrol -s alias,message,name message="*nregistered*"'

# plex
alias notlinked='find . -type f -links 1 \( \! -iname "*.jpg" \! -iname "*.nfo" \! -iname "*.png" \! -iname "*.srt" \)'

# tripwire
alias trippy='sudo tripwire -m c -I'
alias trippyaf='sudo apt-get update && sudo apt-get upgrade -y && sudo tripwire -m c -I'

# todo.txt
alias todo='vim /c/Users/a/Dropbox/todo/todo.txt /c/Users/a/Dropbox/todo/done.txt'

function open () {
    if command -v cmd.exe >/dev/null ; then
        # based on https://superuser.com/questions/1160419/how-can-i-open-a-file-from-wsl-with-the-default-application#comment1846408_1252579
        readlink -f "$*" | sed -e 's/\/\(.\)/\1:/1' -e 's/.*/\"&\"/g' | xargs cmd.exe /c start ""
    elif command -v xdg-open >/dev/null ; then
        xdg-open "$*" &
    else
        echo "open command not set up for this env"
    fi
}

function oppw () {
    op get item "$1" | jq '.details.fields[] | select(.designation=="password").value'
}

# git
alias g='git'

alias ga='git add'

alias gb='git branch'

alias gc='git commit -v'
alias gcd='cd "$(git rev-parse --show-toplevel)"'
alias gcmsg='git commit -m'
alias gco='git checkout'

alias gd='git diff'

alias gf='git fetch'

alias gl='git pull'

alias gp='git push'

alias gr='git remote'
alias gra='git remote add'
alias grb='git rebase'

alias gst='git status'

# vi:syntax=sh
